# 发言高亮测试指南

## 修复内容总结

已修复的问题：

1. **玩家数据初始化** - 确保玩家ID和名称正确设置，支持从player对象获取更准确的数据
2. **发言人匹配逻辑** - 实现多种匹配方式：精确匹配、忽略大小写匹配、部分匹配
3. **调试日志** - 添加详细的调试信息，帮助追踪问题
4. **可视化调试** - 添加发言状态的视觉指示器

## 测试步骤

1. **启动游戏**
   - 访问游戏页面
   - 开始新的游戏会话

2. **查看控制台日志**
   - 打开浏览器开发者工具
   - 查看Console标签页的日志输出
   - 寻找以下关键日志：
     - `[玩家数据] 初始化玩家`
     - `[WebSocket] 收到消息类型`
     - `[发言处理] 收到发言消息`
     - `[发言高亮]` 相关的匹配日志

3. **验证头像高亮**
   - 当进入发言阶段时，对应玩家的头像应该：
     - 发光效果（amber色边框和阴影）
     - 脉冲动画效果
     - 显示绿色"发言中"标签（调试用）
   - 检查头像是否有预期的视觉效果

## 可能的问题排查

如果头像仍然不亮起：

1. **检查玩家名称匹配**
   - 查看日志中的`[发言处理] 当前玩家列表`
   - 对比`player_name`与玩家列表中的名称
   - 确认名称格式是否一致

2. **检查WebSocket消息**
   - 确认收到`debate_turn`类型的消息
   - 检查消息中的`player_name`字段

3. **检查玩家状态**
   - 确认`currentSpeaker`状态是否正确更新
   - 验证`isActive`属性是否正确传递给ModelAvatar组件

## 预期效果

修复后，当玩家发言时：
- 对应头像会有明显的发光效果
- 控制台会显示详细的匹配过程日志
- 头像上方会显示"发言中"的绿色标签（调试用）
- 发言结束后效果会消失